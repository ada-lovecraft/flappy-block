<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>flappy-block</title>

  <!-- build:css main.min.css -->
  <link rel="stylesheet" href="css/main.css"> 
  <!-- /build -->
</head>

<body>
  <a href="https://github.com/codevinsky/flappy-block"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>

    <!-- AddThis Button BEGIN -->
      <div class="addthis_toolbox addthis_floating_style addthis_counter_style" style="left:50px;top:50px;">
      <a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
      <a class="addthis_button_tweet" tw:count="vertical"></a>
      <a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
      <a class="addthis_counter"></a>
      </div>
      <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-52faeba146944c86"></script>
      <!-- AddThis Button END -->
  <div id="flappy-block-game" class="game"></div>
  <div class="identify">
    <div class='doge-widget-wrapper'>
      <form method='get' action='https://www.dogeapi.com/checkout'>
        <input type='hidden' name='widget_type' value='donate'>
        <input type='hidden' name='widget_key' value='ir7viaiwbhq015foqxypslz6w'>
        <input type='hidden' name='payment_address' value='DKYc5edUvU29t77AqgWqnhp5RYhjdo6VNf'>
        <input type='hidden' name='show_received' value='1'>
        <div class='doge-widget' style='display:none;'></div>
      </form>
    </div>
    <div class="twitter">
      <a href="https://twitter.com/codevinsky" class="twitter-follow-button" data-show-count="false" data-lang="en" data-size="large">Made By @codevinsky</a>
  </div>
 
  <!-- build:js main.min.js -->
  <script src="js/lib/phaser.js"></script>
  <script src="js/lib/lodash.min.js"></script>
  <script src="js/lib/q.js"></script>
  <script src="js/boot.js"></script>
  <script src="js/preloader.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/game.js"></script>
  <script src="js/gameover.js"></script>
  <script src="js/main.js"></script>
  <!-- /build -->
  
  <script type='text/javascript' src='https://cdn.firebase.com/js/client/1.0.6/firebase.js'></script>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  <script src='https://www.dogeapi.com/widget/dogeapi.js' type='text/javascript'></script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41145442-6', 'codevinsky.com');
  ga('send', 'pageview');

  </script>
  <script type="text/javascript">
    var highScore = 0;
    var totalGames = 0;
    var highScoresRef = new Firebase('https://flappyblock.firebaseIO.com/enhanced-scores');
    function refreshData() {
      var deferred = Q.defer();
      highScoresRef.on('value', function(snapshot) {
        var snap = snapshot.val();
        var scores = _.map(snap, 'score');
        highScore = _.max(scores);
        totalGames = scores.length;
        deferred.resolve();
        highScoresRef.off('value');
      });
      return deferred.promise;
    }

    function cancelRefresh() {
      highScoresRef.off('value');
    }

    if(!localStorage.getItem('gamesPlayed')) {
      localStorage.setItem('gamesPlayed', 0);
    }
    
    if(!localStorage.getItem('highScore')) {
      localStorage.setItem('highScore', 0);
    }

    function getGamesPlayed() {
      return localStorage.getItem("gamesPlayed");
    }

    function increaseGamesPlayed() {
      localStorage.setItem('gamesPlayed',parseInt(localStorage.getItem("gamesPlayed")) + 1);
    }

    function getPersonalHighScore() {
      return localStorage.getItem('highScore');
    }

    function setPersonalHighScore(score) {
      localStorage.setItem('highScore', score);
    }

    function getGlobalHighScore() {
      return highScore;
    }
    function getGlobalGamesPlayed() {
      return totalGames;
    }
  </script>
  

</body>
</html>

